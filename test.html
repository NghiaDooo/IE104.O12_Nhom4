<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .filter-container {
            margin: 20px;
        }

        .filter-button {
            padding: 10px;
            margin: 5px;
            cursor: pointer;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            text-decoration: none;
        }

        .item {
            display: block;
            margin: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>

<body>

    <div class="filter-container">
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=all">All</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=apple">Apple</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=samsung">Samsung</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=huawei">Huawei</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=oppo">Oppo</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=xiaomi">Xiaomi</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=google">Google</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=sony">Sony</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=nokia">Nokia</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=lg">LG</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=htc">HTC</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=motorola">Motorola</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=oneplus">OnePlus</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=asus">Asus</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?brand=lenovo">Lenovo</a>
    </div>


    <div class="filter-container">
        <a class="filter-button" onClick="handleFilterClick(event)" href="?type=all">All</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?type=phone">Điện thoại</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?type=headphone">Tai nghe</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?type=backup-charging">Sạc dự phòng</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?type=charging-cable">Cáp sạc</a>
    </div>

    <div class="filter-container">
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=all">All</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=0-2000000">Dưới 2 triệu</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=2000000-4000000">Từ 2 điến 4 triệu</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=4000000-7000000">Từ 4 đến 7 triệu</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=7000000-13000000">Từ 7 đến 13 triêu</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=13000000-20000000">Từ 13 đến 20
            triệu</a>
        <a class="filter-button" onClick="handleFilterClick(event)" href="?price=20000000">Trên 20 triệu</a>
    </div>

    <div id="item-container">
        <div class="item category1 type1">Item 1 (Category 1 - Type 1)</div>
        <div class="item category1 type2">Item 2 (Category 1 - Type 2)</div>
        <div class="item category2 type1">Item 3 (Category 2 - Type 1)</div>
        <div class="item category2 type2">Item 4 (Category 2 - Type 2)</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const filterButtons = document.querySelectorAll('.filter-button');
            const items = document.querySelectorAll('.item');

            // Gắn sự kiện click cho mỗi nút lọc của cả hai loại
            filterButtons.forEach(button => {
                button.addEventListener('click', handleFilterClick);
            });

        });
        function handleFilterClick(event) {
            event.preventDefault();
            const filterValue = event.target.getAttribute('href').split('=')[1];
            const filterType = event.target.getAttribute('href').split('=')[0].split('?')[1];
            updateUrlParameter(filterType, filterValue);
        }
        function updateUrlParameter(param, value) {
            const url = new URL(window.location.href);
            // Kiểm tra nếu giá trị là 'all' thì xóa tham số khỏi URL
            if (value === 'all') {
                url.searchParams.delete(param);
            } else {
                if (param == 'brand') {
                    const values = url.searchParams.getAll(param);
                    const valuesArray = values ? values.toString().split(',') : [];
                    console.log(valuesArray)

                    if (!valuesArray.includes(value)) {
                        valuesArray.push(value);
                    }


                    url.searchParams.set(param, valuesArray.join(','));
                }
                else
                    url.searchParams.set(param, value);
            }

            history.pushState(null, null, url.href);
            console.log('Updated URL:', url.href);

        }




    </script>


</html>